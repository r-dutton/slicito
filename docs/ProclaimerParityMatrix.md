# Proclaimer Parity Matrix

This matrix tracks upstream TheProclaimer capabilities and how Slicito.Proclaimer will match them. Each row includes the upstream behavior, the Slicito plan/status, and the concrete tests we will add to verify parity.

| Capability | Upstream behavior | Slicito plan / status | Planned tests |
| --- | --- | --- | --- |
| Service mapping | `flow.workspace.json` / `flow.map.json` map solutions + assembly names to logical services with base URLs. Workspace loaders (`GraphKit.Workspace.*`) shape project metadata. | **Planned**: configuration shim that reads Slicito workspace/service config and emits Service elements with `ServiceName` + base address attributes. | Unit test that feeds a minimal workspace JSON and asserts services are created with deterministic IDs + base URL attributes; integration sample covering multiple assemblies per service. |
| Endpoint discovery (controllers + minimal APIs) | Controller visitors (`ProjectAnalyzer.Controllers*.cs`) and flow analysis locate controller actions, authorize attributes, and minimal API `Map*` registrations with routes + verbs. | **Planned**: `ProclaimerSliceFragmentBuilder` uses Slicito ASP.NET discovery plus Roslyn fallback to create Endpoint elements with `HttpMethod` + `Route`, linking to Service via `BelongsToService`. | Sample ASP.NET project with controllers and minimal APIs; slice assertions for endpoint count, route/method attributes, and links back to the service and code locations. |
| HTTP discovery (HttpClient + typed clients) | `ProjectAnalyzer.Http.cs` + `HttpOperationVisitor` track `HttpClient` fields, wrapper verbs, `HttpRequestMessage` creation, route hints, and query parameters; supports typed proxies. | **Planned**: detect raw and typed HttpClient calls, emit HttpClient elements with `UrlTemplate/HttpMethod` attributes, and `SendsHttpRequest` links from callers (endpoints/services). | Sample typed client plus direct `HttpClient.SendAsync` call; tests assert HttpClient elements capture method/route and links originate from calling endpoints. |
| Repo & DB (EF/Dapper/raw SQL) | `ProjectAnalyzer.Repositories.cs` and `EfOperationVisitor` follow repository classes, `DbContext` usage, and flow into entities/tables via data-flow analysis. | **Planned**: emit Repository + Database elements with `ReadsFrom`/`WritesTo` links that include DbContext/entity/table attributes when inferred. | Sample DbContext + repository with `SaveChanges` and Dapper `Execute`; slice tests assert both EF and raw SQL interactions become DB links with table/entity metadata. |
| Messaging | `ProjectAnalyzer.Messaging.cs` + `MessagingOperationVisitor` look for publisher/consumer fields and method-level publish/consume calls, including handler interfaces. | **Planned**: Queue/Topic elements with `PublishesTo`/`ConsumesFrom` links; attach MessageType when discoverable from generic arguments/handler types. | Sample message publisher + consumer (e.g., MassTransit-style bus) verifying both publish and consume links plus message type attributes. |
| Background services | `ProjectAnalyzer.BackgroundServices.cs` captures hosted/background services and their execute loops. | **Planned**: create BackgroundService elements and attach to owning Service; link internal calls into flows. | Sample `BackgroundService` subclass with timer loop; tests assert element + service link and participation in flow graph. |
| Flow logic (grouping/dedup/path semantics) | Flow analysis (`FlowAnalysis/*`, `Interproc/*`) drives interprocedural expansion; passes (`Analysis.Passes/*`) dedupe nodes, link HTTP/messaging, and sanitize graph. | **Planned**: `ProclaimerFlowService` mirrors grouping/dedup rules on slice links (collapse repeats, respect provenance, maintain main-path vs side effects). | Golden snapshot tests on sample slice comparing produced flow graph to upstream FlowGrep output; include cases with repeated calls and side-effect branches. |
| UI: graph/tree & navigation | FlowGrep renders Markdown/JSON via `Outputs/FlowBuilder/*`; CLI presents graphs for query roots. | **Planned**: VS controllers (`ProclaimerFlowGraphController`/`TreeController`) produce Slicito Graph/Tree models with navigation anchors. | Integration test that builds a sample slice, invokes controllers, and asserts nodes/edges/labels plus navigable code locations for endpoints + HttpClient calls. |
